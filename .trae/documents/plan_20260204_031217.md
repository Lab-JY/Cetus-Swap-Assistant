经过深度代码分析，目前系统功能已覆盖 Swap（聚合器+直连）、Transfer 和 zkLogin，但在代码架构、错误处理和部分功能实现上仍有优化空间。

### **现有问题诊断**
1.  **代码耦合度高**：
    -   `src/app/page.tsx` 超过 1600 行，混合了 UI 渲染、业务逻辑和状态管理，维护成本极高。
    -   `src/utils/cetus.ts` 承担了 SDK 初始化、交易构建、历史查询等过多职责。
2.  **硬编码与灵活性不足**：
    -   直连池映射 (`POOL_MAP`) 和 Gas 估算存在硬编码，不支持动态发现新池子，Gas 估算可能不准。
3.  **用户体验缺陷**：
    -   API 错误（如 Receipt 查询）被静默处理，用户无感知。
    -   Token 列表加载缺乏明确的加载/失败状态提示。
4.  **功能隐患**：
    -   CLMM 模式下的 Zap（闪兑转账）目前分两步执行（Swap -> Transfer），非原子化操作存在用户在第一步后流失导致资金滞留的风险。

### **完善计划 (按优先级排序)**

#### **Phase 1: 架构重构 (Refactoring)**
*目标：降低复杂度，提升代码可读性与可维护性*
1.  **拆分 `cetus.ts`**：将庞大的工具文件拆分为 `src/utils/cetus/sdk.ts` (初始化), `tx-builder.ts` (交易构建), `history.ts` (历史记录)。
2.  **组件化 `page.tsx`**：
    -   提取 `ReviewModal` (交易确认弹窗)
    -   提取 `SuccessModal` (成功弹窗)
    -   提取 `TokenInput` (代币输入框)

#### **Phase 2: 核心体验优化 (UX Improvements)**
*目标：消除静默失败，提供准确反馈*
1.  **动态 Gas 估算**：移除硬编码的 Gas 值，实现基于 `dryRunTransactionBlock` 的实时 Gas 预估。
2.  **错误处理增强**：完善 Token List 加载失败和 Receipt 查询失败的 UI 提示，增加重试机制。

#### **Phase 3: 功能增强 (Feature Enhancements)**
*目标：提升交易安全性和覆盖面*
1.  **原子化 CLMM Zap**：尝试手动构建 Move Call，将 CLMM Swap 和 Transfer 合并到同一个 PTB (Programmable Transaction Block) 中，确保交易要么全成功要么全失败。
2.  **动态池发现**：尝试移除 `POOL_MAP` 硬编码，利用 SDK 动态查找流动性池。

建议先执行 **Phase 1 (架构重构)** 和 **Phase 2 (体验优化)**，稳固基础后再攻克 Phase 3 的原子化难题。
